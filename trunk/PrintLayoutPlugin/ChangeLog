2007-03-10  Sascha L. Teichmann  <sascha.teichmann@intevation.de> 

	Initial support for preview maps.

	* src/de/intevation/printlayout/PreviewMap.java:
		New: DocumentModifier that creates a preview map. This
		is mainly an image that is served to the SVG renderer
		through the IncoreImageProtocolHandler.

	* src/de/intevation/printlayout/batik/IncoreImageProtocolHandler.java:
		Implements a protocol handler that offers an "incore-image:"
		protocol to the SVG renderer. The data is served through instances
		of an inner	class that extends Batik's ParsedURLData.

	* src/de/intevation/printlayout/PrintLayoutPlugin.java:
		Register the IncoreImageProtocolHandler to the protocol
		serving ParsedURL class of Batik.

	* src/de/intevation/printlayout/LayoutFrame.java:
		Added a menu entry for new preview map.

	* src/de/intevation/printlayout/i18n/messages.properties,
		src/de/intevation/printlayout/i18n/messages_de.properties:
		Text for the new menu entry.

	* src/de/intevation/printlayout/pathcompact/OverlapSorter.java:
		fix a _very_ minor bug: The reinsert order during group building
		was inverted. That has no visual effect but the structure of
		the generated SVG was partly upside down compared with the original.

	* src/de/intevation/printlayout/pathcompact/PathCompactor.java:
		- Reuse PathOptimizer for all paths to avoid needless
		  constructing a new one again and again and again.
		- Optimizing paths too that are not concatenated to others.
		
	* src/de/intevation/printlayout/pathcompact/PathOptimizer.java:
		- Fix bug when "M0 0" is issued at the begin of the path.
		  This one is _not_ redundant, even if we are at (0, 0)!
		- Give segment list a larger initial size (8*1024). That
		  should reduce the number of reallocation with larger paths.

2007-03-10  Sascha L. Teichmann  <sascha.teichmann@intevation.de> 

	Use CSS for map style attributes if wanted.

	* src/de/intevation/printlayout/batik/StyleSheetHandler.java:
		New. Generates CSS sections for SVG documents.

	* src/de/intevation/printlayout/pathcompact/ElementAttributes.java:
		Doubles as CSS lookup key now.

	* src/de/intevation/printlayout/util/ElementUtils.java:
		Add method getElementById(element, id). This is odd.
		Is there a better way to lookup an element if you
		only have an org.w3c.dom.Element as pseudo root and
		no owner document?

	* src/de/intevation/printlayout/Map2SVG.java:
		Added support for CSS. This slows down the generation
		process and only saves a little memory. Therefore
		its off by default. Use the property 
		"de.intevation.printlayout.use.css.map" to turn it on.
		
	* src/de/intevation/printlayout/pathcompact/OverlapSorter.java:
		removed needless import

2007-03-10  Sascha L. Teichmann  <sascha.teichmann@intevation.de> 

	Not using Batik's DOM implementation for map generation anymore.

	* src/de/intevation/printlayout/pathcompact/PathOptimizer.java:
		Fix a bug with redundant move commands. Now they are simply
		eliminated.

	* src/de/intevation/printlayout/Map2SVG.java:
		- Added property "de.intevation.printlayout.optimize.map.batik.dom".
		  The Batik DOM implementation is _very_ slow and memory hungry.
		  For rendering and optimizing the Java on board DOM implementation
		  is used instead and afterwards imported into the Batik document.
		  If you want to use the Batik DOM anyway set this property to
		  true.
		- Added some extra garbage collection calls. 

	* src/de/intevation/printlayout/batik/ClippingSVGGraphics2D.java:
		Added the possibility to convert Shapes to GeneralPaths.
		This enables to optimize point layers as well because
		the points are represented by small Rectangle2D objects.
		
	* src/de/intevation/printlayout/pathcompact/OverlapSorter.java:
		Cleanup the tracing output a bit.

2007-03-09  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/Map2SVG.java:
		If the system property
		de.intevation.printlayout.optimize.map.svg
		is set true, the map is optimized before appended to the 
		SVG document.

	* src/de/intevation/printlayout/pathcompact/AABB.java,
	  src/de/intevation/printlayout/pathcompact/ElementAttributes.java,
	  src/de/intevation/printlayout/pathcompact/OverlapSorter.java,
	  src/de/intevation/printlayout/pathcompact/PathCompactor.java,
	  src/de/intevation/printlayout/pathcompact/PathOptimizer.java:
	  	added. Optimize a document.


2007-03-05  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/Legend2SVG.java:
		Simplified text generation in legend a bit.

2007-03-05  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Small bugfix.

	* src/de/intevation/printlayout/Legend2SVG.java:
		If ThemeStyle is enabled and the attribute contains 
		integer, we need to handle Integers instead of Strings.
		So use toString() as casting.
	
2007-03-05  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Make plugin Java 1.4 compatible

	* etc/build.xml:
		The 'compile' target forces compiler to treat source as Java 1.4
		and build 1.4 stamped binaries.

	* src/de/intevation/printlayout/LayoutFrame.java,
		src/de/intevation/printlayout/batik/ClippingSVGGraphics2D.java,
		src/de/intevation/printlayout/tools/BoxPropPanel.java,
		src/de/intevation/printlayout/ui/JPEGParameterDialog.java:
		Fixed some auto boxing problems. This feature was introduced
		in Java 1.5
		
2007-03-04  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Replaced deprecated File.toURL() with File.toURI()
	
	* src/de/intevation/printlayout/DocumentManager.java:
		Replace File.toURL() with File.toURI(). This toURL() call
		is deprecated in Java 6 for a good reason. We need only the
		URIs anyway and it's backwards compatible.

	* src/de/intevation/printlayout/batik/ClippingSVGGraphics2D.java:
		- Add a JavaDoc.
		- Removed a needless import.

	* src/de/intevation/printlayout/util/CohenSutherland.java:
		Name of file was wrong in header.

2007-03-04  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Clip geometries to visible area while importing map as SVG from GIS.

	* src/de/intevation/printlayout/batik/ClippingSVGGraphics2D.java:
		New. Extends Batik's SVGGraphics2D and implements real clipping for 
		the rendered geometries. TODO: handle the image stuff too.

	* src/de/intevation/printlayout/util/CohenSutherland.java:
		Implements Cohen Sutherland line clipping.

	* src/de/intevation/printlayout/Map2SVG.java:
		Modified to use the ClippingSVGGraphics2D instead of the
		standard SVGGraphics2D. If the user sets the system property
		de.intevation.printlayout.no.map.clip=true the unclipped
		version is used.

	* src/de/intevation/printlayout/DocumentManager.java:
		Fixed broken JavaDoc tag.

2007-03-02  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Fixed: Inner rendering order was swaped when creating groups.
	The inner rendering order of a new built group was determined
	by the order of the selection. Having e.g. objects A and B
	be selected, A behind B but A selected before B resulted in
	a group where B was behind A.

	* src/de/intevation/printlayout/DocumentManager.java:
		Added a orderIDsByRenderingOrder() method which orders a set of
		selected IDs by there rendering order. This is used by groupIDs()
		to maintain the correct rendering order in a new built group.
	
2007-03-02  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Added support for legends. (kind of "suggestion")

	* src/de/intevation/printlayout/Legend2SVG.java:
		New. Generates a legend for the current visible
		and activated layers in OpenJUMP.

	* src/de/intevation/printlayout/LayoutFrame.java:
		Added the menu item and the action.

	* src/de/intevation/printlayout/i18n/messages.properties,
		src/de/intevation/printlayout/i18n/messages_de.properties:
		Messages for the legend menu item.

2007-03-01  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Doing the 0.9.1 release.

	* src/de/intevation/printlayout/InfoDialog.java: Version to 0.9.1.
	* src/de/intevation/printlayout/resources/about.html: Version to 0.9.1
	and added credits.

	* Changes.txt: Summarized changes for 0.9.1.

	* HowTo-Release.txt: Fixed a filename. Added hint on CVS sync check.


2007-02-28  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	The generation of the SVG version of the GIS map is now
	in a standalone class.

	* src/de/intevation/printlayout/Map2SVG.java:
		new. The code to generate the SVG version of the GIS map
		is now inside a DocumentModifer and the DOM factory of
		the already existing document is used.

	* src/de/intevation/printlayout/LayoutFrame.java:
		removed the SVG creation code of the map.

	* src/de/intevation/printlayout/beans/ExtraData.java,
		src/de/intevation/printlayout/DocumentManager.java:
		very small cleanups.

2007-02-26  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		Added some JavaDoc comments.

2007-02-26  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Workaround for missing bounding boxes in selection tool.
	In very rare(!) cases Batik returns an SVGLocatable which issues
	a NullPointerException if one trys to access its bounding box.
	This seems to be a bug in Batik because there is no visible
	reason why the selected objects should not have a bounding box.
	It happens in the context of changing the rendering z order.

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		do an extra check for null references in setup the shape.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		catches the exception and simply deselects the critical object.

2007-02-26  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Added support for shearing of selected elements.

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		- Move the LineProjector code out to PickingInteractor.
		- Fixes a small bug when drawing scale handles. They were
		  inside to selection for some ration angles.
		- draw handles for shearing in rotation mode.
		- Added some JavaDoc.

	* src/de/intevation/printlayout/DocumentManager.java:
		Added method to shear selected elements.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		Cleanup code and introduce the ability to shear objects.
		TODO: add JavaDoc comments

	* src/de/intevation/printlayout/ui/ImageParameterDialog.java:
		Small typo fix in JavaDoc comment.

2007-02-25  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/RulerOverlay.java:
		Added some JavaDoc comments.

2007-02-24  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/Arrows.java,
	  src/de/intevation/printlayout/tools/PanInteractor.java,
	  src/de/intevation/printlayout/tools/Tool.java,
	  src/de/intevation/printlayout/util/FileFilter.java,
	  src/de/intevation/printlayout/util/LineProjector.java:
		Added some JavaDoc comments.

2007-02-24  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/util/GeometricMath.java,
	  src/de/intevation/printlayout/util/LineProjector.java,
	  src/de/intevation/printlayout/util/MatrixTools.java,
	  src/de/intevation/printlayout/util/PaperSizes.java:
		Added some JavaDoc comments.

2007-02-24  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/I18N.java,
	  src/de/intevation/printlayout/InfoDialog.java,
	  src/de/intevation/printlayout/LayoutCanvas.java,
	  src/de/intevation/printlayout/LayoutExtension.java,
	  src/de/intevation/printlayout/PrintLayoutPlugin.java,
	  src/de/intevation/printlayout/batik/PatternExt.java,
	  src/de/intevation/printlayout/ui/ImageParameterDialog.java,
	  src/de/intevation/printlayout/util/Template.java,
	  src/de/intevation/printlayout/util/TypoUnits.java:
		Added some JavaDoc comments.

2007-02-24  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Introduce a new common base class for image encoding parameters.

	* src/de/intevation/printlayout/ui/ImageParameterDialog.java:
		new: abstract base class to ease the implemention
		of several image export parameter dialogs e.g. for PNG, TIFF etc.

	* src/de/intevation/printlayout/ui/JPEGParameterDialog.java:
		only the JPEG specific stuff is left. The rest has been moved
		to base class ImageParameterDialog. Improved the JavaDoc.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		adjusted for new ImageParameterDialog base class.

2007-02-24  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Improve parameter dialog for JPEG export a bit.

	* src/de/intevation/printlayout/LayoutFrame.java:
		create always a fresh JPEGParameterDialog if export is requested.
		Don't store it an instance variable any more.
	 	 
	* src/de/intevation/printlayout/ui/JPEGParameterDialog.java:
		add a textfield for current quality. cleanup event handling.

2007-02-23  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Added support for JPEG export.

	* src/de/intevation/printlayout/DocumentManager.java:
		added method transcodeToFile() for general SVG transcoding.
		The special case of image encoding uses this method.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added a menu entry to export as JPG.

	* src/de/intevation/printlayout/ui/:
		new: package for special GUI dialogs. 
		TODO: move some of the dialogs from tool to this place.

	* src/de/intevation/printlayout/ui/package.html:
		new: short JavaDoc description of the new package.

	* src/de/intevation/printlayout/ui/JPEGParameterDialog.java:
		new. Asks user for image size and image quality.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		added texts for new menu entry and JPG parameter dialog.

2007-02-22  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Added support for changing the z order of the laid out elements.

	* src/de/intevation/printlayout/DocumentManager.java:
		added methods moveUp() and moveDown() to move
		selected elements one level up or down.

	* src/de/intevation/printlayout/LayoutFrame.java:
		create menu entries in edit menu and connect
		them to the respective actions.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		i18n for new menu entries.

	* TODO.txt:
		removed point "SVG order change system"
	
2007-02-22  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		removed needless import.

	* src/de/intevation/printlayout/LayoutFrame.java:
		moved mouse postion tracking code out of GUI setup.
		
2007-02-22  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Added support for non-uniform object scaling.

	- Pressing shift during scaling forces uniform scaling.
	- Beware! Rotate non-uniform scaled objects introduce shear!
	- On non-uniformly scaled maps the maximum of x and y scale
	  is used to calculate scale bars and texts.

	* src/de/intevation/printlayout/DocumentManager.java:
		Add support for non-uniform object scaling. Removed
		some unused scaling code.

	* src/de/intevation/printlayout/util/LineProjector.java:
		Added: Mainly a line with the ability to calculate
		the point on the line which lies closest to a given point.
		Used to stabilize mouse motions along a line.

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		Generate four extra handles in scaling mode for 
		non-uniform scaling. Uses a LineProjector to project
		mouse coordinates back to the scaling line to avoid
		numerical problems.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		adjust to use the new scaling code.
		
	* src/de/intevation/printlayout/util/GeometricMath.java:
		added some vector math for Point2D.

	* src/de/intevation/printlayout/util/MatrixTools.java:
		a new AffineTransform constructor for Decomposition.

2007-02-21  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		small code clean up.

	* TODO.txt:
		adjusted.

2007-02-20  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* lib/batik-all.jar:
		update to new svn version.

	* TODO.txt:
		adjusted.

2007-02-20  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/tools/TextDialog.java:
		ensure that the selected fontfamily is displayed.
	
	* TODO.txt:
		adjusted.
		
2007-02-20  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		added javadoc comments.

	* TODO.txt:
		adjusted.

2007-02-20  Ludwig Reiter  <ludwig.reiter@intevation.de>

	completed i18n of TextDialog.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
	  	appended new properties for plain, bold, italic
		and bolditalic.

	* src/de/intevation/printlayout/tools/TextDialog.java:
		added i18n of the font style.

	* TODO.txt:
		adjusted.

2007-02-20  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Added overwrite confirm dialog.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added the dialog.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
	  	inserted the message and the title of the overwrite
		confirm dialog.

2007-02-20  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Added new icons for magnify.

	* src/de/intevation/printlayout/resources/viewmag+.png,
	  src/de/intevation/printlayout/resources/viewmag-.png,
	  src/de/intevation/printlayout/resources/viewmag1.png:
		New icons.

	* src/de/intevation/printlayout/resources/Magnify11.gif,
	  src/de/intevation/printlayout/resources/Magnifyminus.gif,
	  src/de/intevation/printlayout/resources/Magnifyplus.gif:
		removed the old icons.

	* src/de/intevation/printlayout/LayoutFrame.java:
		adjusted.

2007-02-19  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Added package informations and some short descriptions.

	* src/de/intevation/printlayout/package.html,
	  src/de/intevation/printlayout/batik/package.html,
	  src/de/intevation/printlayout/beans/package.html,
	  src/de/intevation/printlayout/tools/package.html,
	  src/de/intevation/printlayout/util/package.html:
		new: package informations for JavaDoc

	* src/de/intevation/printlayout/DocumentManager.java,
	  src/de/intevation/printlayout/I18N.java,
	  src/de/intevation/printlayout/InfoDialog.java,
	  src/de/intevation/printlayout/LayoutCanvas.java,
	  src/de/intevation/printlayout/LayoutExtension.java,
	  src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/PrintLayoutPlugin.java,
	  src/de/intevation/printlayout/batik/PatternExt.java,
	  src/de/intevation/printlayout/beans/ExtraData.java,
	  src/de/intevation/printlayout/beans/MapData.java,
	  src/de/intevation/printlayout/beans/ScaleBarUpdater.java,
	  src/de/intevation/printlayout/beans/ScaleUpdater.java:
		added some short descriptions

2007-02-19  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Refactoring package structure to clarify the internal 
	structure of the plugin (part 2).
	Introduction of beans and batik packages

	* src/de/intevation/printlayout/DocumentManagerUtils.java:
		removed and reinserted as ...

	* src/de/intevation/printlayout/util/ElementUtils.java:
		because they offer methods to handle Elements not DocumentManagers.

	* src/de/intevation/printlayout/beans/:
		created. Contains all the extra magic of the document
		which is not SVG.

	* src/de/intevation/printlayout/beans/ExtraData.java,
	  src/de/intevation/printlayout/beans/MapData.java,
	  src/de/intevation/printlayout/beans/ScaleBarUpdater.java,
	  src/de/intevation/printlayout/beans/ScaleUpdater.java:
		Moved here from one level up.

	* src/de/intevation/printlayout/batik:
		Created. Contains special Batik stuff e.g. extensions

	* src/de/intevation/printlayout/batik/PatternExt.java:
		Moved here from one level up.
		

	* src/de/intevation/printlayout/tools/BoxUpdateModifier.java,
	  src/de/intevation/printlayout/tools/DrawingAttributes.java,
	  src/de/intevation/printlayout/tools/TextConsumer.java,
	  src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/DocumentManager.java:
		Adjusted to new package structure.

	* src/de/intevation/printlayout/resources/ZoomIconLoader.java,
		src/de/intevation/printlayout/resources/paper-sizes.properties,
		src/de/intevation/printlayout/resources/paper-tmpl.svg:
		Forgot to commit removal last check in.

2007-02-18  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	Refactoring package structure to clarify the internal 
	structure of the plugin (part 1).
	Introduction of util package
	
	* etc/build.xml:
		improved javadoc target to generate better JavaDocs.

	* src/de/intevation/printlayout/util/:
		created.

	* src/de/intevation/printlayout/util/GeometricMath.java,
	  src/de/intevation/printlayout/util/MatrixTools.java,
	  src/de/intevation/printlayout/util/PaperSizes.java,
	  src/de/intevation/printlayout/util/Template.java,
	  src/de/intevation/printlayout/util/TypoUnits.java,
	  src/de/intevation/printlayout/util/resources/paper-sizes.properties,
	  src/de/intevation/printlayout/util/resources/paper-tmpl.svg:
		Files moved here from one package level up.

	* src/de/intevation/printlayout/FileUtils.java:
		removed.

	* src/de/intevation/printlayout/util/FileFilter.java:
		added. was FileUtils. All static methods are
		promoted to instance methods. Old usage was silly
		procedural programming style.

	* src/de/intevation/printlayout/resources/ZoomIconLoader.java:
		needless class.

	* src/de/intevation/printlayout/tools/RulerOverlay.java:
		moved from one level up to here because it is some kind
		of tool.

	* src/de/intevation/printlayout/DocumentManager.java,
	  src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/PrintLayoutPlugin.java,
	  src/de/intevation/printlayout/ScaleBarUpdater.java,
	  src/de/intevation/printlayout/ScaleUpdater.java,
	  src/de/intevation/printlayout/tools/BoxFactory.java,
	  src/de/intevation/printlayout/tools/BoxInteractor.java,
	  src/de/intevation/printlayout/tools/OnScreenBox.java,
	  src/de/intevation/printlayout/tools/PickingInteractor.java,
	  src/de/intevation/printlayout/tools/TextConsumer.java:
		adjusted to new package structure.

2007-02-16  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* src/de/intevation/printlayout/DocumentManager.java:
		added javadoc comments.

2007-02-16  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		added some javadoc comments.

2007-02-15  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* TODO.txt:
		created some new issues.

2007-02-15  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	added file filter and svgz support.

	* src/de/intevation/printlayout/FileUtils.java:
		New. Contains a generic FileFilter and a class method
		to append an extension, if needed.
	
	* src/de/intevation/printlayout/DocumentManager.java:
		added svgz support.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added file filter.

2007-02-15  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* src/de/intevation/printlayout/LayoutFrame.java:
		changed the accelerator keys.

2007-02-15  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	added some icons for the zooming buttons.

	* src/de/intevation/printlayout/LayoutFrame.java:
		installed new icons.

	* src/de/intevation/printlayout/resources/Magnify11.gif,
	  src/de/intevation/printlayout/resources/Magnifyminus.gif,
	  src/de/intevation/printlayout/resources/Magnifyplus.gif,
	  src/de/intevation/printlayout/resources/ZoomIconLoader.java:
	  	New. Icons and loader.

2007-02-14  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	- Fixes a nasty bug in selection tool: If you moved a selected
	  object too fast around (large deltas) the handles of the
	  selected object were not redrawn properly (only partial visible).

	- Fixes some wrong file names in headers (C&P mistakes).

	* src/de/intevation/printlayout/LayoutCanvas.java:
		Offers a new interface DamageRegion. An implementor
		can determine the damaged area on screen before the
		drawing is actually done. Incoming repaint() requests
		are enlarged so that the repaint is done on the complete
		forseen damaged region. Batik trys to optimize the
		redraw by minimizing the repaint region. If you use overlays
		this region is calculated too small because Batik does
		not know where the overlay will do its painting. 
		
	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		if activated the selection tool is registered as a
		DamageRegion to the LayoutCanvas, so the real damage done
		by its overlay can be calculated before repainting.

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		The calculation of the damage and  the drawing are now
		separated to fit in the forecast model of DamageRegion.

	* src/de/intevation/printlayout/ExtraData.java,
	  src/de/intevation/printlayout/GUIUtils.java,
	  src/de/intevation/printlayout/InfoDialog.java,
	  src/de/intevation/printlayout/MatrixTools.java,
	  src/de/intevation/printlayout/PatternExt.java,
	  src/de/intevation/printlayout/Template.java,
	  src/de/intevation/printlayout/tools/Arrows.java,
	  src/de/intevation/printlayout/tools/BoxPropPanel.java,
	  src/de/intevation/printlayout/tools/ColorButton.java,
	  src/de/intevation/printlayout/tools/ConsumerUtils.java,
	  src/de/intevation/printlayout/tools/TextConsumer.java:
		Corrected wrong file names in headers.
	
2007-02-14  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	Fourth part of the text tool.
	Used the tspan tag to create newlines in texts.
	Removed some wrong imports.

	* src/de/intevation/printlayout/DocumentManagerUtils.java,
	  src/de/intevation/printlayout/tools/BoxUpdateModifier.java:
		removed imports.
		
	* src/de/intevation/printlayout/GUIUtils.java:
		the getText method accepts text with tspan tags.

	* src/de/intevation/printlayout/tools/TextConsumer.java:
		now uses configureTextElement to append tspan lines
		into the text element. So that newlines are displayed.

2007-02-14  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	change of the methods of DocumentManagerUtils and adjusting
	the Modifier.
	The only rect/text elements which are wanted to be modified,
	are the only child of an element with leaf id.
	So the algorithmens of the firstElementByTag and the getElementByTag
	methods cost much and were wrong.
	So I replaced them.
	Now only a single selected rect/text can be modified and the
	getElementById method is mostly used.

	* src/de/intevation/printlayout/DocumentManagerUtils.java:
		replaced firstElementByTag an getElementByTag
		by getIDObjectByTag.

	* src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/tools/BoxUpdateModifier.java,
	  src/de/intevation/printlayout/tools/TextConsumer.java:
	  	adjusted.

2007-02-14  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	I18n of the text dialog and the box dialog.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		added some new messages.

	* src/de/intevation/printlayout/tools/BoxPropertiesDialog.java,
	  src/de/intevation/printlayout/tools/TextDialog.java:
	  	installed the i18n of the dialogs.

2007-02-14  Ludwig Reiter  <ludwig.reiter@intevation.de>

	small bugfixes.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added accelerator key to the info dialog.

	* src/de/intevation/printlayout/resources/info.html,
	  src/de/intevation/printlayout/resources/info_de.html:
		rewrited the texts.

	* src/de/intevation/printlayout/tools/BoxFactory.java:
		changed the pointer-events property of a box.
	
2007-02-13  Ludwig Reiter  <ludwig.reiter@intevation.de>

	added a help dialog.
	
	* src/de/intevation/printlayout/resources/about.html:
		New. The text of the about dialog.
	
	* src/de/intevation/printlayout/resources/info_de.html:
		New. The German text of the help dialog.
		
	* src/de/intevation/printlayout/resources/info.html:
		contains the English text of the help dialog.

	* src/de/intevation/printlayout/InfoDialog.java:
		Added a getLocalizedResource() method and used
		this to get the resource.
		Added a new constructor with variable resource.
		
	* src/de/intevation/printlayout/LayoutFrame.java:
		used the new constructor to display the info
		dialog and the about dialog.
	
2007-02-13  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* HowTo-Release.txt: Updated to include source code and
	refined here and there.

2007-02-13  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Doing the 0.9.0 release.

	* src/de/intevation/printlayout/InfoDialog.java,
	src/de/intevation/printlayout/resources/info.html: Version to 0.9.0.

	* Changes.txt: Summarized changes for 0.9.0.

2007-02-12  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Third part of the text tool.
	A selected text can be changed by a text properties dialog
	and the dialog knows the old values.

	* src/de/intevation/printlayout/GUIUtils.java:
		added getFont and getText methods.

	* src/de/intevation/printlayout/LayoutFrame.java:
		The text dialog in the TextPropAction gets the
		old values of the text element.
	
	* src/de/intevation/printlayout/tools/TextDialog.java:
		can now handle null as font.
	
2007-02-09  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Second part of the text tool.
	A selected text can be changed by a text properties dialog,
	but this dialog doesn't know the values of the text.

	* src/de/intevation/printlayout/DocumentManagerUtils.java:
		small bugfix.
		
	* src/de/intevation/printlayout/LayoutFrame.java:
		added a text properties button.
		
	* src/de/intevation/printlayout/tools/TextConsumer.java:
		added an update modifier.
		
	* src/de/intevation/printlayout/tools/TextDialog.java:
		The method "isAccepted()" became public. 
		
	* src/de/intevation/printlayout/tools/TextInteractor.java:
		small change of the Consumer interface.
		createText() --> createNewText().

2007-02-09  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/tools/BoxFactory.java,
	  src/de/intevation/printlayout/tools/TextConsumer.java:
		Project was not compilable. Removed needless imports.

2007-02-08  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	comment clean up.

	* src/de/intevation/printlayout/tools/TextConsumer.java:
		removed a unneeded comment.

2007-02-08  Ludwig Reiter  <ludwig.reiter@intevation.de>

	another small code clean up. 
	
	* src/de/intevation/printlayout/tools/RectModifier.java,
	  src/de/intevation/printlayout/tools/BoxUpdateModifier.java:
		Moved RectModifier to BoxUpdateModifier.
	
	* src/de/intevation/printlayout/tools/BoxInteractor.java,
	  src/de/intevation/printlayout/tools/BoxFactory.java,
	  src/de/intevation/printlayout/LayoutFrame.java:
	  	adjusted.

2007-02-08  Ludwig Reiter  <ludwig.reiter@intevation.de>

	small code clean up.
	
	* src/de/intevation/printlayout/tools/BoxFactory.java,
	  src/de/intevation/printlayout/tools/TextConsumer.java:
		moved some methods to the ConsumerUtils.

	* src/de/intevation/printlayout/tools/ConsumerUtils.java:
		New. It contains some class methods for setting
		attributes to an AbstractElement.

2007-02-08  Ludwig Reiter  <ludwig.reiter@intevation.de>

	First part of the text tool. 

	* src/de/intevation/printlayout/tools/TextDialog.java:
		New. A dialog for text and its properties.

	* src/de/intevation/printlayout/tools/TextInteractor.java:
		New. If this new tool is activated and somewhere 
		is clicked in the sheet, it opens a TextDialog and
		uses a TextConsumer to write a text in the sheet.

	* src/de/intevation/printlayout/tools/TextConsumer.java:
		New. This consumes the text properties and the text and 
		creates a DocumentModifer, which inserts the text in the
		SVG document.

	* src/de/intevation/printlayout/tools/BoxFactory.java:
		The method getSVGColor became public and static.

	* src/de/intevation/printlayout/LayoutFrame.java:
		adjusted to the new tool.

2007-02-08  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* TODO.txt: New. Wishes and whats needs to be done.

2007-02-07  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Added some comments.

	* src/de/intevation/printlayout/DocumentManager.java,
	  src/de/intevation/printlayout/DocumentManagerUtils.java,
	  src/de/intevation/printlayout/GUIUtils.java:
		added some javadoc comments.

2007-02-06  Ludwig Reiter  <ludwig.reiter@intevation.de>

	A small code clean up.
	Extracted some methods from DocumentManager and moved
	them to DocumentManagerUtils.

	* src/de/intevation/printlayout/DocumentManager.java:
		extracted the methodes checkIDsByTag, getElementByTag
		and getREctDrawingAttributes.
	
	* src/de/intevation/printlayout/DocumentManagerUtils.java:
		installed the methods from the DocumentManager here.

	* src/de/intevation/printlayout/tools/RectModifier.java,
	  src/de/intevation/printlayout/LayoutFrame.java:
	  	adjusted.

2007-02-06  Ludwig Reiter  <ludwig.reiter@intevation.de>

	Second part of the box properties dialog.
	The box properties dialog shows the old values of the rectangle.
	So you can modify the properties, rather than select new ones.

	* src/de/intevation/printlayout/DocumentManager.java:
		new methods to find elements by tags.
	
	* src/de/intevation/printlayout/GUIUtils.java:
		added. This class helps to generate a current 
		DrawingAttribute for the box property dialog.
		It has methods to get a color or a stroke from
		a Element.
	
	* src/de/intevation/printlayout/LayoutFrame.java:
		adjusted the box properties button.
	
	* src/de/intevation/printlayout/tools/BoxPropPanel.java,
	  src/de/intevation/printlayout/tools/BoxPropertiesDialog.java:
	  	The dialog can now show the current properties of
		an existing rectangle.
		
	* src/de/intevation/printlayout/tools/RectModifier.java:
		added. After configuring box properties, the properties
		of the rectangle in the SVGDocument are modified
	        by using this class.

2007-01-31  Ludwig Reiter  <ludwig.reiter@intevation.de>

	First part of the box properties dialog. It is now possible
	to change existing rectangles with the properties dialog.

	* src/de/intevation/printlayout/LayoutFrame.java:
		modified the BoxPropAction. 

	* src/de/intevation/printlayout/DocumentManager.java,
	  src/de/intevation/printlayout/tools/BoxFactory.java:
		added methods to configure color and stroke of a "rect"
		SVG object.

2007-02-02  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		set after point precision of SVG map import from GIS to 12 digits.

2007-02-01  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Documentation fixes.

	* HowTo-Release.txt: Slight improvements.

	* INSTALL.txt: Added hint on .bat-file

	* src/de/intevation/printlayout/resources/info.html:
	  Fixed Version number.

2007-02-01  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/RulerOverlay.java:
		added. rulers are now modeled as an overlay not
		as part of the document.

	* src/de/intevation/printlayout/DocumentManager.java,
	  src/de/intevation/printlayout/PrintLayoutPlugin.java:
		comment out decorateWithRulers(). TODO: remove it.

	* src/de/intevation/printlayout/LayoutFrame.java:
		Add a new menu 'view' ('Ansicht') with an entry
		'Show Ruler' ('Lineal anzeigen'). off by default.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		messages for the view menu.

	* src/de/intevation/printlayout/MatrixTools.java:
		little error in matrix decomposition fixed.

	* src/de/intevation/printlayout/tools/BoxPropPanel.java:
		removed needless imports.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		PickingListener now extends java.util.EventListener.

2007-01-31  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
	  	added i18n of the box properties dialog.

2007-01-31  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/tools/BoxPropertiesDialog.java:
		Added. A dialog for box drawing attributes.

	* src/de/intevation/printlayout/tools/BoxPropPanel.java:
		Added. Main GUI part of BoxPropertiesDialog.

	* src/de/intevation/printlayout/tools/ColorButton.java:
		Added. Button for choosing colors.
	
	* src/de/intevation/printlayout/LayoutFrame.java:
		installed the BoxPropertiesDialog.
	
2007-01-31  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		make stroke of selection 3px wide and break the stroke
		each 5px. Color is still red. TODO: discuss if e.g. 
		XOR mode gives better optical feedback to the user.

	* src/de/intevation/printlayout/ScaleBarUpdater.java:
		removed needless import.

2007-01-30  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		fix incorrect switching between new panning tool and
		the other tools.

2007-01-30  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PanInteractor.java:
		added. Panning tool. pressing shift is no longer needed.

	* src/de/intevation/printlayout/LayoutFrame.java:
		deactivates default panning tool and uses our custom one.

2007-01-30  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Doing the 0.8.2 release.

	* src/de/intevation/printlayout/InfoDialog.java: Version to 0.8.2.

	* Changes.txt: Changes for 0.8.2.

2007-01-30  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* HowTo-Release.txt:
		added a 'clean' to the 'ant dist' line. -> 'ant clean dist'
		to avoid that old garbage makes its way into the release.

	* src/de/intevation/printlayout/I18N.java,
	  src/de/intevation/printlayout/LayoutFrame.java:
		added a few extra 'if's to make i18n more null pointer bullet proof.

2007-01-30  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* HowTo-Release.txt: New. Guide for doing a release.

2007-01-30  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* INSTALL.txt: Added hint for Windows.

2007-01-30  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Doing the 0.8.1 release.

	* Changes.txt: New. Describes the overall change history for users.

	* src/de/intevation/printlayout/InfoDialog.java: Version to 0.8.1.

2007-01-30  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* INSTALL.txt: New. Describes how to install when receiving
	only the jar file. Intended to accompany the jar file.

2007-01-30  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/i18n/messages.properties:
		correct typo in messages.

2007-01-30  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/i18n/messages.properties:
		fix for broken english i18n messages. Added missing '&'
		for menu entries.

2007-01-30  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		add method to insert AbstractElements in center of
		view. uses new interface GenerateElement. TODO:
		modify addText() to use this interface as well.

	* src/de/intevation/printlayout/ScaleBarUpdater.java:
		builds an SVG scale bar for a given map.
		TODO: make it to listener of map.

	* src/de/intevation/printlayout/LayoutFrame.java:
		uses ScaleBarUpdater if user wants to add a scale bar
		to a map.
		
2007-01-29  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		add method scaleFixedIDs() to scale along fixed point.
		The orginal scaleIDs() is left inside as a later option, e.g.
		pressing shift during the drag may change the behavior!?

	* src/de/intevation/printlayout/LayoutCanvas.java:
		use damaged region in even more repaint() & Co. methods.
		TODO: figure out why handles in selection mode not
		redraw properly.

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		if dragging starts on decoration the opposite point
		of the touched handle is returned as a reference point.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		scaling in selection mode fixates the opposite site side of
		the touched handle and scales proportional.

2007-01-28  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		added methods saveSession() and loadSession().
		Saving produces a ZIP file containing of two files: 'document.svg'
		and 'extra.xml'. The SVG entry represents the current state
		of the graphical part. The extra.xml is a Java Beans serialization
		of the non graphical "magic" like the connection between 
		maps and scale text.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added menu entries to save and load a session.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		message for save/load.

2007-01-28  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		added method switchToDocument() to allow paper size changes.

	* src/de/intevation/printlayout/LayoutFrame.java:
		add menu entries to change paper size.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		messages for new menu

	* src/de/intevation/printlayout/PaperSizes.java:
		add guessPaperSize() to allow reverse lookup
		key if sizes are given.

	* src/de/intevation/printlayout/resources/paper-sizes.properties:
		added Letter (US)

2007-01-28  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		don't create documents in construction any longer.

	* src/de/intevation/printlayout/DocumentManager.java:
		decorateWithRulers() is now a static method applicable
		to SVG documents.

	* src/de/intevation/printlayout/PrintLayoutPlugin.java:
		constructs a LayoutFrame and adds a document afterwards.

2007-01-28  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutCanvas.java:
		removed needless import

	* src/de/intevation/printlayout/LayoutFrame.java:
		- removed svgCanvas instance variable
		- move creation of SVG sheet to PaperSizes

	* src/de/intevation/printlayout/PaperSizes.java:
		readed SVGDocument paper sheet creation here.

2007-01-28  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/PaperSizes.java:
		load paper sizes from paper-sizes.properties instead
		of being hard coded in this class

	* src/de/intevation/printlayout/resources/paper-sizes.properties:
		added. list of paper sizes

	* src/de/intevation/printlayout/resources/a4.svg:
		removed. no need for A4 fallback any longer

	* src/de/intevation/printlayout/LayoutFrame.java:
		- don't uses the A4 fallback any longer.
		- enable menu entry to add scale bar only if selected
		  object is a map.

2007-01-26  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		remove call to LayoutCanvas.installSVGDocument()

	* src/de/intevation/printlayout/InfoDialog.java:
		Change frame title from "test" to "Print/Layout v0.8"

	* src/de/intevation/printlayout/LayoutCanvas.java:
		remove needless installSVGDocument()

	* src/de/intevation/printlayout/LayoutFrame.java:
		switch some calls to workaround some wrong(?) inner 
		side effects inside Batik with JSVGScrollPane vs. JSVGCanvas

	* src/de/intevation/printlayout/PaperSizes.java:
		uses Template
		
	* src/de/intevation/printlayout/Template.java:
		smarter template replacer

	* src/de/intevation/printlayout/resources/paper-tmpl.svg:
		smarter template

2007-01-26  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* src/de/intevation/printlayout/LayoutFrame.java:
		workaround: SVGMatrix.getA() throws NullPointerException.
		We catch this exception.

2007-01-26  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		removed about dialog shortcut.

2007-01-26  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		add a null pointer check in coordinate mouse listener

	* src/de/intevation/printlayout/DocumentManager.java:
		set preserveAspectRatio in printing to "none".

2007-01-26  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		add a label in the south west with mouse coordinates in paper
		coordinate system.

2007-01-25  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/ExtraData.java:
		fix a bug preventing maps from being removed.

	* src/de/intevation/printlayout/LayoutFrame.java:
		add ScaleUpdater as RemoveListener of scale text.

	* src/de/intevation/printlayout/ScaleUpdater.java:
		implements RemoveListener as well.
		remove ScaleUpdater as Listener from ChangeListener
		list of watched map.

2007-01-25  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		set scale text position initially to screen center.

2007-01-25  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		added markings to rulers.

2007-01-25  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		added method generateRulers().TODO: add markings.

2007-01-25  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	added a about dialog.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added InfoDialogAction and a help menu.

	* src/de/intevation/printlayout/InfoDialog.java:
		a about dialog. This dialog shows resources/info.html.
	
	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
	  	Two new entries for the help dialog.
	
	* src/de/intevation/printlayout/resources/info.html:
		the about dialog message.

2007-01-25  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		new event system for not SVG data

	* src/de/intevation/printlayout/ExtraData.java:
		manages extra (not SVG data) and broadcasts events

	* src/de/intevation/printlayout/LayoutFrame.java:
		uses scale text.

	* src/de/intevation/printlayout/MapData.java:
		stores the not SVG data of GIS maps.

	* src/de/intevation/printlayout/MatrixTools.java:
		added a class to decompose a matrix.

	* src/de/intevation/printlayout/ScaleUpdater.java:
		event listener updating scale text.
		TODO: add remove listener if scale text is removed.

2007-01-25  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		added accelerators to the menu items.

2007-01-25  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		changed toolbar button order. 

2007-01-25  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* README.txt: Cleaned up unneccesary white spaces and empty lines.
		Tiny typo.

2007-01-23  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/PatternExt.java:
	  render WKTFillPattern (BasicFillPattern) to a texture
		and use this as fill pattern.
		
2007-01-23  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/PatternExt.java:
		added. A simple Batik ExtensionHandler which catches 
		com.vividsolutions.jump.workbench.ui.renderer.style.WKTFillPattern
		Paint objects and replaces it with color "red".
		TODO: Figure out how to generate an adequate 
		SVG fill pattern.

	* src/de/intevation/printlayout/LayoutFrame.java:
		uses the ExtensionHandler

2007-01-23  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* etc/build.xml,
	  etc/build.properties:
	  	added a "javadoc" target to the ant script.
		This target uses javadoc to create a documentation
		for the whole plugin to the "doc" directory.

2007-01-23  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		included a text toggle button.

2007-01-23  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* src/de/intevation/printlayout/LayoutFrame.java:
		changed the text of the toogle buttons
		to tooltiptext.

2007-01-23  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* lib/batik-all.jar,
	  lib/js.jar,
	  lib/pdf-transcoder.jar,
	  lib/xml-apis-ext.jar,
	  lib/xml-apis.jar:
	  	switch to the new batik svn version, because of
		some changes in the pdf-transcoder.jar.

2007-01-23  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* src/de/intevation/printlayout/LayoutFrame.java:
		added icons for the toggle buttons.

2007-01-23  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		added dummy menu entries for scale bar and text. triggers
		"not implemented yet" warnings.

	* src/de/intevation/printlayout/i18n/messages.properties,
	  src/de/intevation/printlayout/i18n/messages_de.properties:
		added messages for menu entries and warning

2007-01-22  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		The Batik PrintTranscoder scales and translates the
		whole document down to the printable area of the
		selected printer. To compensate this effect an
		inverse affine transform is concatenated to the
		printers Graphics2D context before it is handed
		over to the PrintTranscoder.

	* src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/tools/OnScreenBox.java:
		removed needless imports.

2007-01-22  Sascha L. Teichmann  <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		- add full extend, zoom step in/out buttons to toolbar
		- store last directory used in file choosers.

2007-01-22  Ludwig Reiter  <ludwig.reiter@intevation.de>

	* src/de/intevation/printlayout/I18N.java:
		added two methods to get a label and a mnemonic key
		from a bundle string.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added hotkeys to the menu of this frame.
	
	* src/de/intevation/printlayout/i18n/messages_de.properties:
		added '&'s to the messages to mark the hotkeys.

2007-01-22  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutCanvas.java:
		if a damaged region is set enlarge in repaint(...)-request
		the region to repaint.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		track damaged region of the overlay and set in LayoutCanvas

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		- enlarge damaged region
		- arrows are now drawn outside the selection box

2007-01-21  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		simplification of object scaling code.

2007-01-21  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		add method to rotate objects around the center of
		there bounding boxes.

	* src/de/intevation/printlayout/tools/Arrows.java:
		dont create any precalculated arrows any longer.
		if needed they are carve on the fly. ;-)

	* src/de/intevation/printlayout/GeometricMath.java:
		added. intended to store simple geometrical functions

	* src/de/intevation/printlayout/tools/OnScreenBox.java,
		src/de/intevation/printlayout/tools/PickingInteractor.java:
		GUI support for rotation.

2007-01-20  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		- added interface AfterDocumentModification. potentially useful
		  if one wants to update the selection after group/ungroup.
		- added scaleIDs() to scale selected elements proportional.

	* src/de/intevation/printlayout/LayoutCanvas.java:
		add damageRegions() to hint the RenderingManager that
		a list of regions need to be a repaint. This is too slow!

	* src/de/intevation/printlayout/tools/Arrows.java:
		shifted the arrow y coordinates all to negative.

	* src/de/intevation/printlayout/tools/OnScreenBox.java:
		on screen overlay element used by PickingInteractor.
		offers decoration (arrows).

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		- uses now the external OnScreenBox 
		- scale and translate are modeled with the 
	    new TransformOperation interface.

2007-01-19  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		fix a bug in ungroup: swaped order of matrix multiplication
		displaced new children.

2007-01-19  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		- don't store the transformed shape for overlays any more 
		  only the tranformed vertex points -> needed for scale/rotate handles

2007-01-19  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		don't check if mouse is inside of bounding boxes. only check
		in on mouse pressed.

2007-01-19  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/I18N.java:
		added. wrapper around java.util.ResourceBundle

	* src/de/intevation/printlayout/LayoutFrame.java:
		uses I18N now

	* src/de/intevation/printlayout/i18n/messages.properties,
		src/de/intevation/printlayout/i18n/messages_de.properties:
		added. i18n messages, english and german

2007-01-19  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		add a method to translate objects with a delta given in
		screen coordinates.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		stores the shapes of bounding box of the selected objects
		and looks if dragging occurs in one of them -> move
		objects around.

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		added a method to ungroup a group

	* src/de/intevation/printlayout/LayoutFrame.java:
		add menu entry to ungroup groups

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		- add a flag to indicate in point query only to result objects
		  which are directly embedded in the drawing sheet.
		- method to clear selection.

	* src/de/intevation/printlayout/DocumentManager.java:
		add method to build a group from a set of ids.
		the objects needs to be embedded directly in the drawing sheet-

	* src/de/intevation/printlayout/LayoutFrame.java:
		add a menu item to group selected items.

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		has now a method to remove a set set of ids from DOM.

	* src/de/intevation/printlayout/LayoutFrame.java:
		added a menu item to remove selected items
		
	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		inform listeners if during paint() of the overlay it is
		recognized that the selection is no longer valid.
		

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		offers now a PickingListener interface. implementation
		can use it to get informed if selection changes.
		
	* src/de/intevation/printlayout/LayoutFrame.java:
		implements PickingListener interface.

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		query our interactors before other if they want to start.

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		enhance selection. unmodified clicks select only one object.
		click + <crtl> elongates current selection with object under
		Mouse. click + <shift> removes object under mouse from selection.

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		- reordered menus once again. "File", "Edit", "Insert"
		- added Close entry to File menu
	
2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		default color/stroke/fill for box drawing is now 
		black/continues/unfilled.

	* src/de/intevation/printlayout/tools/BoxFactory.java:
		set "fill" property to "none" if no fill is given.
		set "pointer-events" to "all" to make it selectable
		even in unfilled state.

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		title of the plugin frame is now "Print/Layout"

	* src/de/intevation/printlayout/PrintLayoutPlugin.java:
		the plugin is now activated over OJ's "File" menu
		in german called "Datei" over entry "Print/Layout"

2007-01-18  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/Arrows.java:
		added. vector shapes for arrows needed in translation tool.

2007-01-17  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		rename tool buttons

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		add overlay to select tool

2007-01-17  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/Tool.java:
		added. interface to be implemented by all tools

	* src/de/intevation/printlayout/tools/BoxInteractor.java:
		implements Tool interface

	* src/de/intevation/printlayout/tools/PickingInteractor.java:
		added, simple picking tool

	* src/de/intevation/printlayout/LayoutFrame.java:
		uses new picking tool and new Tool infrastructure.
		
2007-01-17  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* README.txt:
		Add missing 'cvs login' in I/a

2007-01-17  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* README.txt:
		Add a paragraph how to build and install the plugin

	* bin/run.sh:
		remove a needless variable

2007-01-17  Ludwig Reiter  <ludwig.reiter@intevation.de>
	
	* LICENSE.txt:
	  added. The license is LGPL (>=v2.1).
	  
	* src/de/intevation/printlayout/DocumentManager.java,
		src/de/intevation/printlayout/LayoutCanvas.java,
		src/de/intevation/printlayout/LayoutExtension.java,
		src/de/intevation/printlayout/LayoutFrame.java,
		src/de/intevation/printlayout/MatrixTools.java,
		src/de/intevation/printlayout/PaperSizes.java,
		src/de/intevation/printlayout/PrintLayoutPlugin.java,
		src/de/intevation/printlayout/TypoUnits.java,
		src/de/intevation/printlayout/tools/BoxFactory.java,
		src/de/intevation/printlayout/tools/BoxInteractor.java,
		src/de/intevation/printlayout/tools/DrawingAttributes.java:
		Added license header.
	

2007-01-17  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java,
		src/de/intevation/printlayout/LayoutCanvas.java,
		src/de/intevation/printlayout/LayoutExtension.java,
		src/de/intevation/printlayout/LayoutFrame.java,
		src/de/intevation/printlayout/MatrixTools.java,
		src/de/intevation/printlayout/PaperSizes.java,
		src/de/intevation/printlayout/PrintLayoutPlugin.java,
		src/de/intevation/printlayout/TypoUnits.java,
		src/de/intevation/printlayout/tools/BoxFactory.java,
		src/de/intevation/printlayout/tools/BoxInteractor.java,
		src/de/intevation/printlayout/tools/DrawingAttributes.java:
		Added copyright header.

2007-01-17  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/tools/BoxFactory.java,
	  src/de/intevation/printlayout/tools/BoxInteractor.java:
		fix for boxes with negative width or height

	* src/de/intevation/printlayout/DocumentManager.java:

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/DocumentManager.java:
		- DocumentModifier.run() now is called with DocumentManager
		  instead of SVGDocument. -> fetching unique IDs is possible
		- import of images via ImageIO added

	* src/de/intevation/printlayout/tools/BoxFactory.java:
		Uses new DocumentModifier.

	* src/de/intevation/printlayout/LayoutFrame.java:
		- reordered menus
		- add menu item to import image

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java,
	  src/de/intevation/printlayout/PrintLayoutPlugin.java,
	  src/de/intevation/printlayout/tools/BoxInteractor.java,
	  src/de/intevation/printlayout/tools/BoxFactory.java:
		removed needless imports. 

	* src/de/intevation/printlayout/resources/a4.svg:
		tolerate overflow in outer SVG

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		support for tools

	* src/de/intevation/printlayout/DocumentManager.java:
		getSVGDocument() added

	* src/de/intevation/printlayout/tools/DrawingAttributes.java:
		stores different attributes for drawing, color, stroke etc.

	* src/de/intevation/printlayout/tools/BoxInteractor.java:
		tool to draw filled boxes.

	* src/de/intevation/printlayout/tools/BoxFactory.java:
		produces a box an append it to SVG DOM.

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		scale map proportional.

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		using menus instead of buttons. make LayoutFrame a JFrame

	* src/de/intevation/printlayout/PrintLayoutPlugin.java:
		using LayoutFrame as a JFrame

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		set (x, y, width, height) of the generated map svg
		manually. -> map is rendered correctly

	* src/de/intevation/printlayout/DocumentManager.java:
		add a flag in appendSVG() to ignore (x, y, width, height)
		if given manually.

2007-01-16  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/LayoutFrame.java:
		buttons for printing and pdf export added.
		TODO: use menu.

	* src/de/intevation/printlayout/TypoUnits.java:
		mm2in() added.

	* src/de/intevation/printlayout/DocumentManager.java:
		- get paper size out of document
		- add pdf export and printing.

2007-01-15  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/PrintLayoutPlugin.java:
		forward plugin context to LayoutFrame

	* src/de/intevation/printlayout/MatrixTools.java:
		added. ease handling Java <-> SVG affine transform

	* src/de/intevation/printlayout/LayoutFrame.java:
		simple button to add the map content to the
		SVG document.

	* src/de/intevation/printlayout/DocumentManager.java:
		forward transform of map -> paper format.
		TODO: remove hard wired DIN A4 stuff

2007-01-15  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* etc/build.xml:
		enable debug tag in javac task
	
	* src/de/intevation/printlayout/LayoutCanvas.java:
		added. a special JSVGCanvas

	* src/de/intevation/printlayout/DocumentManager.java:
		added. Simplifies certain DOM task.

	* src/de/intevation/printlayout/LayoutManager.java:
		modified. uses LayoutCanvas and DocumentManager.

2007-01-12  Ludwig Reiter <ludwig.reiter@intevation.de>
	* etc/build.xml:
		a simple ant script.
	* etc/build.properties:
		project properties.

2007-01-12  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* etc/, etc/workbench-properties.xml:
		added to lauch OpenJump with plugin

	* resources/*:
		removed, wrong place

	* src/de/intevation/printlayout/resources/*:
		readded here

	* src/de/intevation/printlayout/LayoutFrame.java:
		added, simple JFrame for plugin.

	* src/de/intevation/printlayout/LayoutExtension.java:
		added, simple extension

	* src/de/intevation/printlayout/PrintLayoutPlugin.java:
		added, plugin interface to OpenJump

	* bin/run.sh:
		correction of plugin path

	* bin/compile.sh:
		correction of plugin path. uses etc/workbench-properties.xml
		to run with plugin from classes not as jar

	* classes:
		added, stores compiled classes

2007-01-12  Sascha L. Teichmann <sascha.teichmann@intevation.de>

	* src/de/intevation/printlayout/TypoUnits.java,
	  src/de/intevation/printlayout/PaperSizes.java,
	  lib/xml-apis.jar:
	  	added.

2007-01-12  Sascha L. Teichmann <teichmann@intevation.de>
	
	* bin/compile.sh:
		set CLASSPATH correctly.

	* src/de/intevation/printlayout/PrintlayoutPlugin.java:
		added.

2007-01-12  Ludwig Reiter <ludwig.reiter@intevation.de>
	
	* LICENSE.txt:
		Removed.

2007-01-11  Ludwig Reiter <ludwig.reiter@intevation.de>
	* README.txt:
		A brief summary of this plugin.
	* LICENSE.txt:
		The license of the plugin.
	* bin/run.sh:
		Simple run script for OpenJump with PrintLayoutPlugin.
	* bin/compile.sh:
		Simple compile script.
	* resources/a4.svg:
		Default sheet layout for DIN-A4.
	* lib/batik-all.jar, lib/js.jar, lib/pdf-transcoder.jar,
	  lib/xml-apis-ext.jar:
	  	Libraries to use current SVN version of Batik in the plugin.
	  
